const CordaVerify = artifacts.require('CordaVerify');

contract('CordaVerify', async accounts => {

  let instance = null;
  let testData = [{
    id: "Example DApp",
    prefix: '636F726461010000',
    component: '0080C562000000000001D0000027640000000300A3226E65742E636F7264613A51307A55474E2F4B367777777975496C4E66335261773D3DD00000090E0000000500A3226E65742E636F7264613A372B30747468524E384B742B546255446266663837413D3DC0820100A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A05B3059301306072A8648CE3D020106082A8648CE3D03010703420004175D4CC68C1CABE5E3ADAE46E33B7B1E8B8428E208233B08FE291E81864F1D7C3EEF538E0F25CB032A9775CFD3DA2B69FAB7F0B076606A0E226BA8106299387CA12D636F6D2E68716C61782E636F72646170702E7374617465732E636F6E74726163742E444352436F6E747261637400A3226E65742E636F7264613A6C384E444C4337546D6F66572B417A566968564766773D3DD0000006F40000000D00A3226E65742E636F7264613A716C4F746A6D6A77534A33326D48672F412B687248513D3DC06E02A1334175746F2D6372656174656420627920274F3D48514C41782D746573742042616E6B2042322C204C3D5A75672C20433D434827A1366175746F5F323032322D31312D30325F315F36633130333164612D353632352D343635352D623936322D39333430373764626239643100A3226E65742E636F7264613A6554414961694E4B66362F467979494B2F5A61684B413D3DD0000002080000000300A31B6E65742E636F7264613A6A6176612E74696D652E496E7374616E74C00C02810000000063628C08540000A3226E65742E636F7264613A523477446C646D7063617430714A69614D6F6B4C71673D3DD00000010400000004A105313233343500A3226E65742E636F7264613A59547946443473417359744A363870585A6174782B413D3DC00802A1035454505400A10343424C00A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC09E0200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC0240640A1024348A1035A7567A11548514C41782D7465737420437573746F6469616E31404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B6570032100459F403625FFA7BB6C8A134C6A5948F827C0C183C2895F188931FED9A3534C4200A3226E65742E636F7264613A45583852527570724C736849316D35314F34333333413D3DC08302A10C44453030304132595A50583100A3226E65742E636F7264613A706F656271466B4E7A723766524144726C4B526770413D3DC04D0200A31C6E65742E636F7264613A6A6176612E7574696C2E43757272656E6379A10347425000A31E6E65742E636F7264613A6A6176612E6D6174682E426967446563696D616CA105313233343500A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC0F20200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC07806A129556E636F6E6E65637465642055415420427573696E657373204E6574776F726B204F70657261746F72A1024C55A10A4C7578656D626F757267A10E48514C417820532E612E722E6C2EA129556E636F6E6E65637465642055415420427573696E657373204E6574776F726B204F70657261746F724000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B6570032100B19BD2E78B2AFF73CA6DA53A48A1E4D31DD266C05C2B390A1CE6E88359DB208200A31B6E65742E636F7264613A6A6176612E74696D652E496E7374616E74C00F02810000000063628A96712A9E08C000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC09B0200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC0210640A1024348A1035A7567A11248514C41782D746573742042616E6B204131404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B6570032100DEC989D1F7D08669F9078624458038BB0BD4857E812F0532EC1EC2655D90B99B00A3226E65742E636F7264613A4D656C566A6B6B514A4775576352742F734E567074413D3DC01C02A1174443525F4541524D41524B5F464F525F4C454E44494E4754234000A3226E65742E636F7264613A30314A2B42395A6E33693266557852656258614742773D3DC04004414200A3226E65742E636F7264613A715951623867366D674C4F2F664A62775132576B6A673D3DC01502A11050454E44494E475F454E43554D42455254054000A3226E65742E636F7264613A726E69773742324D7169377A6C6B50704B6D4A3737413D3DC01302409854FEDF0F32D1420FA0A38DB74AED80B100A31B6E65742E636F7264613A6A6176612E74696D652E496E7374616E74C00F02810000000063628ADE71110C038000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC09B0200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC0210640A1024348A1035A7567A11248514C41782D746573742042616E6B204232404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B65700321005D69FA3D4D9C29280CF6B048C4B7C2E63CFB7CD73FBCD7B9AB6C4CFD2191CFC5540300A3226E65742E636F7264613A726E69773742324D7169377A6C6B50704B6D4A3737413D3DC02002A10C323032322D31312D30325F31986C1031DA56254655B962934077DBB9D14000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC0EC0200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC04306A1214E6F6E2D76616C69646174696E67205541542053554231204841204E6F74617279A1025553A1084E657720596F726BA10D523320486F6C64436F204C4C43404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A05B3059301306072A8648CE3D020106082A8648CE3D0301070342000448A450E7A340C810034F36C6CE78197CBEC20D123858813F7E27A881BDDFDCFACF21A4115FA93CD9C9A6CCEEFCF548DD3CD4A0EE6CAA7F57EB08AC23E54B6AAC0080C562000000000002D000001CBE00000001D000001CB5000000160080C562000000000005D00000018400000005A1296E65742E636F7264612E636F72652E636F6E7472616374732E5472616E73616374696F6E537461746540450080C562000000000003C02602A3226E65742E636F7264613A51307A55474E2F4B367777777975496C4E66335261773D3D40D00000011C000000050080C562000000000004C04607A10A636F6E73747261696E74A1012AC03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E74404041420080C562000000000004C01807A108636F6E7472616374A106737472696E6745404041420080C562000000000004C03907A10464617461A1012AC02901A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E74726163745374617465404041420080C562000000000004C01807A10B656E63756D6272616E6365A103696E7445404042420080C562000000000004C02D07A1066E6F74617279A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404041420080C562000000000005C09605A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E7440C03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E740080C562000000000003C02602A3226E65742E636F7264613A4D6766362F7332416A6B5A6154382F6255396E4E53513D3D40450080C562000000000005C08805A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E7472616374537461746540C02901A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A5A326932426D6F35324566756346585A3842324350513D3D40450080C562000000000005C0D105A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747940450080C562000000000003C02602A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3D40C07B020080C562000000000004C03307A1046E616D65A1256E65742E636F7264612E636F72652E6964656E746974792E436F726461583530304E616D6545404041420080C562000000000004C02F07A1096F776E696E674B6579A1012AC01A01A1176A6176612E73656375726974792E5075626C69634B6579404041420080C562000000000005D00000014400000005A1256E65742E636F7264612E636F72652E6964656E746974792E436F726461583530304E616D6540450080C562000000000003C02602A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3D40C0E3060080C562000000000004C01A07A10A636F6D6D6F6E4E616D65A106737472696E6745404042420080C562000000000004C01707A107636F756E747279A106737472696E6745404041420080C562000000000004C01807A1086C6F63616C697479A106737472696E6745404041420080C562000000000004C01C07A10C6F7267616E69736174696F6EA106737472696E6745404041420080C562000000000004C02007A1106F7267616E69736174696F6E556E6974A106737472696E6745404042420080C562000000000004C01507A1057374617465A106737472696E6745404042420080C562000000000005C0D605A1366E65742E636F7264612E636F72652E636F6E7472616374732E5369676E61747572654174746163686D656E74436F6E73747261696E7440C03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E740080C562000000000003C02602A3226E65742E636F7264613A372B30747468524E384B742B546255446266663837413D3D40C036010080C562000000000004C02907A1036B6579A1012AC01A01A1176A6176612E73656375726974792E5075626C69634B6579404041420080C562000000000005D00000044A00000005A127636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E444352537461746540C0AE04A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C655374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E74726163745374617465A136636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E436F6E7472616374436F6D70617261626C655374617465A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E65617253746174650080C562000000000003C02602A3226E65742E636F7264613A6C384E444C4337546D6F66572B417A566968564766773D3D40D0000003350000000D0080C562000000000004C04307A10B616E6E6F746174696F6E73A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E55736572416E6E6F746174696F6E7345404041420080C562000000000004C04107A1056173736574A132636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E44435241737365744465736372697074696F6E45404041420080C562000000000004C02A07A103626E6FA11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404041420080C562000000000004C02207A10763726561746564A1116A6176612E74696D652E496E7374616E7445404041420080C562000000000004C03307A10C6561726D61726B6564466F72A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404042420080C562000000000004C03B07A1096576656E7454797065A128636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4576656E745479706545404041420080C562000000000004C02D07A1066C656E646572A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404042420080C562000000000004C04907A1096C6966656379636C65A136636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4443525374617465244C6966656379636C65537461746545404041420080C562000000000004C03B07A1086C696E6561724964A1296E65742E636F7264612E636F72652E636F6E7472616374732E556E697175654964656E74696669657245404041420080C562000000000004C02307A1086D6F646966696564A1116A6176612E74696D652E496E7374616E7445404041420080C562000000000004C02C07A1056F776E6572A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404041420080C562000000000004C01D07A10E73657175656E63654E756D626572A103696E7445A101304041420080C562000000000004C03A07A10774726164654964A1296E65742E636F7264612E636F72652E636F6E7472616374732E556E697175654964656E74696669657245404042420080C562000000000005C0AE05A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C65537461746540C05002A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C655374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A42383263534636543034544350666C67587332626B673D3D40450080C562000000000005C0D005A136636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E436F6E7472616374436F6D70617261626C65537461746540C06102A136636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E436F6E7472616374436F6D70617261626C655374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A2B784B334151745A313959556F35627A356447502B513D3D40450080C562000000000005C0AC05A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E656172537461746540C04F02A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E6561725374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A416A4D5A704D6F6A5268685A36364A6B7433576243413D3D40450080C562000000000005C0AF05A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E55736572416E6E6F746174696F6E7340450080C562000000000003C02602A3226E65742E636F7264613A716C4F746A6D6A77534A33326D48672F412B687248513D3D40C048020080C562000000000004C01B07A10B6465736372697074696F6EA106737472696E6745404041420080C562000000000004C01407A1046E616D65A106737472696E6745404041420080C562000000000005D00000015100000005A132636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E44435241737365744465736372697074696F6E40450080C562000000000003C02602A3226E65742E636F7264613A6554414961694E4B66362F467979494B2F5A61684B413D3D40C0E3030080C562000000000004C03007A115636F6C6C61746572616C697A6174696F6E54696D65A1116A6176612E74696D652E496E7374616E7445404041420080C562000000000004C04707A10F637573746F64794C6F636174696F6EA12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E437573746F64794C6F636174696F6E45404041420080C562000000000004C04707A10F696E76656E746F7279546172676574A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E496E76656E746F727954617267657445404041420080C562000000000005D00000014000000005A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E437573746F64794C6F636174696F6E40450080C562000000000003C02602A3226E65742E636F7264613A523477446C646D7063617430714A69614D6F6B4C71673D3D40C0D6040080C562000000000004C01907A1096163636F756E744964A106737472696E6745404041420080C562000000000004C04607A10B6163636F756E7454797065A131636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E437573746F64794163636F756E745479706545404041420080C562000000000004C01B07A10B637573746F6469616E4964A106737472696E6745404042420080C562000000000004C02B07A1046E6F6465A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404041420080C562000000000006C0BD06A131636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E437573746F64794163636F756E74547970654045A1046C6973740080C562000000000003C02602A3226E65742E636F7264613A59547946443473417359744A363870585A6174782B413D3D40C04D030080C562000000000007C00902A103545450A101300080C562000000000007C01102A10B435553544F4D4552524546A101310080C562000000000007C00E02A108504C4154464F524DA101320080C562000000000005C06605A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E496E76656E746F727954617267657440450080C562000000000003C02602A3226E65742E636F7264613A6B4B6E3979547A4871534D747557756F35307A7769413D3D40450080C562000000000006D00000055C00000006A128636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4576656E74547970654045A1046C6973740080C562000000000003C02602A3226E65742E636F7264613A4D656C566A6B6B514A4775576352742F734E567074413D3D40D0000004EF000000260080C562000000000007C01502A10F554E444546494E45445F4556454E54A101300080C562000000000007C01302A10D53544154455F55504752414445A101310080C562000000000007C01402A10E53544154455F44454C4554494F4EA101320080C562000000000007C01002A10A4443525F435245415445A101330080C562000000000007C01102A10B4443525F434F4E4649524DA101340080C562000000000007C01002A10A4443525F52454A454354A101350080C562000000000007C01F02A1194443525F5345545F434F4C4C41544552414C495A4154494F4EA101360080C562000000000007C01002A10A4443525F465245455A45A101370080C562000000000007C01202A10C4443525F554E465245455A45A101380080C562000000000007C01602A1104443525F4154544143485F5452414445A101390080C562000000000007C00F02A1084443525F4C454E44A10231300080C562000000000007C01302A10C4443525F454E43554D424552A10231310080C562000000000007C01102A10A4443525F504C45444745A10231320080C562000000000007C01102A10A4443525F554E57494E44A10231330080C562000000000007C01502A10E4443525F554E454E43554D424552A10231340080C562000000000007C00F02A1084443525F4641494CA10231350080C562000000000007C01702A1104443525F4445544143485F5452414445A10231360080C562000000000007C01802A1114443525F4348414E47455F414D4F554E54A10231370080C562000000000007C01B02A1144443525F524551554553545F44454C4554494F4EA10231380080C562000000000007C01302A10C54524144455F435245415445A10231390080C562000000000007C01302A10C54524144455F52454A454354A10232300080C562000000000007C01502A10E54524144455F5343484544554C45A10232310080C562000000000007C01502A10E54524144455F4143544956415445A10232320080C562000000000007C01302A10C54524144455F4D4154555245A10232330080C562000000000007C01102A10A54524144455F4641494CA10232340080C562000000000007C01302A10C54524144455F43414E43454CA10232350080C562000000000007C01C02A11554524144455F4348414E47455F4D41545552495459A10232360080C562000000000007C01A02A11354524144455F4348414E47455F414D4F554E54A10232370080C562000000000007C01602A10F50524F504F53414C5F435245415445A10232380080C562000000000007C01402A10D50524F504F53414C5F5349474EA10232390080C562000000000007C01502A10E50524F504F53414C5F4150504C59A10233300080C562000000000007C01602A10F50524F504F53414C5F52454A454354A10233310080C562000000000007C01602A10F50524F504F53414C5F455850495245A10233320080C562000000000007C01D02A1164443525F494E535452554354494F4E5F435245415445A10233330080C562000000000007C01302A10C4443525F5452414E53464552A10233340080C562000000000007C01E02A1174443525F4541524D41524B5F464F525F4C454E44494E47A10233350080C562000000000007C01D02A1164443525F4541524D41524B5F464F525F554E57494E44A10233360080C562000000000007C01A02A1134443525F554E444F5F4541524D41524B494E47A10233370080C562000000000005D00000016D00000005A136636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4443525374617465244C6966656379636C65537461746540450080C562000000000003C02602A3226E65742E636F7264613A30314A2B42395A6E33693266557852656258614742773D3D40C0FB040080C562000000000004C02707A1106973436F6C6C61746572616C697A6564A107626F6F6C65616E45A10566616C73654041420080C562000000000004C01F07A108697346726F7A656EA107626F6F6C65616E45A10566616C73654041420080C562000000000004C03E07A106737461747573A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E44435253746174652453746174757345404041420080C562000000000004C04607A10C7472616E7366657254797065A130636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E6465616C2E5472616E736665725479706545404042420080C562000000000006D00000013F00000006A12E636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4443525374617465245374617475734045A1046C6973740080C562000000000003C02602A3226E65742E636F7264613A715951623867366D674C4F2F664A62775132576B6A673D3D40C0CF070080C562000000000007C00D02A10743524541544544A101300080C562000000000007C00E02A10852454A4543544544A101310080C562000000000007C00F02A109434F4E4649524D4544A101320080C562000000000007C01002A10A454E43554D4245524544A101330080C562000000000007C01602A11050454E44494E475F44454C4554494F4EA101340080C562000000000007C01602A11050454E44494E475F454E43554D424552A101350080C562000000000007C01402A10E50454E44494E475F554E57494E44A101360080C562000000000006C0DD06A130636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E6465616C2E5472616E73666572547970654045A1046C6973740080C562000000000003C02602A3226E65742E636F7264613A347A6E7A666D366F346263477256766E714B5A7147773D3D40C06E040080C562000000000007C01402A10E5449544C455F5452414E53464552A101300080C562000000000007C00C02A106504C45444745A101310080C562000000000007C01302A10D434153485F45584348414E4745A101320080C562000000000007C00A02A1044E4F4E45A101330080C562000000000005C0A505A1296E65742E636F7264612E636F72652E636F6E7472616374732E556E697175654964656E74696669657240450080C562000000000003C02602A3226E65742E636F7264613A726E69773742324D7169377A6C6B50704B6D4A3737413D3D40C043020080C562000000000004C01A07A10A65787465726E616C4964A106737472696E6745404042420080C562000000000004C01007A1026964A1047575696445404041420080C562000000000005C0DD05A134636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4261736B6574496E76656E746F727954617267657440450080C562000000000003C02602A3226E65742E636F7264613A45583852527570724C736849316D35314F34333333413D3D40C070020080C562000000000004C01607A1066261736B6574A106737472696E6745404042420080C562000000000004C04107A10D6E6F74696F6E616C56616C7565A12A636F6D2E68716C61782E636F72646170702E7374617465732E6D6F64656C2E4D6F6E6579416D6F756E7445404041420080C562000000000005C0C605A12A636F6D2E68716C61782E636F72646170702E7374617465732E6D6F64656C2E4D6F6E6579416D6F756E7440450080C562000000000003C02602A3226E65742E636F7264613A706F656271466B4E7A723766524144726C4B526770413D3D40C063020080C562000000000004C02407A10863757272656E6379A1126A6176612E7574696C2E43757272656E637945404041420080C562000000000004C02607A1087175616E74697479A1146A6176612E6D6174682E426967446563696D616C45404041420080C562000000000009D10000014C00000002A128636F6D2E68716C61782E636F72646170702E7374617465732E73746174652E4576656E7454797065D100000119000000020080C56200000000000B5401D000000104000000040080C56200000000000AC03803A10B456E756D44656661756C74A10F554E444546494E45445F4556454E54A1174443525F4541524D41524B5F464F525F4C454E44494E470080C56200000000000AC03703A10B456E756D44656661756C74A10F554E444546494E45445F4556454E54A1164443525F4541524D41524B5F464F525F554E57494E440080C56200000000000AC03403A10B456E756D44656661756C74A10F554E444546494E45445F4556454E54A1134443525F554E444F5F4541524D41524B494E470080C56200000000000AC02D03A10B456E756D44656661756C74A10F554E444546494E45445F4556454E54A10C4443525F5452414E53464552',
    nonce: 'D45B6EE5A1283F652B57B3ABEB5AE4AB2F647ACB6F8196E12A6FBDA6080BF6AC',
    hash: '60601A16F49D0C6E8BD14415F466F8BD4B0981F58A15BDB06A1FA1E3DC49553F',
    salt: 'D30CB6D01ED31A436B9AA753C50BBF96E0EA57F0F33FB0CF7B315327CAD60698',
    groupIndex: '01',
    internalIndex: '00',
    root: 'AA7AF2ABDAA2E37785B23AEC36F73A3280FF1326595D0F976532FF8246D8536C',
    tradeId: '2022-11-02_1',
    receiver: 'Tz1IUUxBeC10ZXN0IEJhbmsgQjIsIEw9WnVnLCBDPUNI',
    sender: 'Tz1IUUxBeC10ZXN0IEJhbmsgQTEsIEw9WnVnLCBDPUNI',
    controlContract: '0xc23cdfef6ec7b1b39c6cb898d7acc71437f167bd',
    sourceBlockchainId: '0x04',
    holdAmount: '0x3039', //12345;
    leaves: [
      '0x2F248BBBE40D5BC1EFCF85CAF7EA0C226006CD4CED5461277CC0060F44DAF773',
      '0x60601A16F49D0C6E8BD14415F466F8BD4B0981F58A15BDB06A1FA1E3DC49553F',
      '0x5DB25DB06EACEEE9A49228A902C2C1BA0910AECD149E8F1DF7FC6D368A85903F',
      '0xDDC9A03FD435B5F2DD529315B28F2FD48F10CEF8F40D9584F9F20E5C1C56AD2B',
      '0xD610601AB516421FF10B2EA9C2E5CBAFE46224BCCCF1A70BA8E05415E26745B3',
      '0x3BCE67FBCD315211CC82B6A93B21AFFD925FA418C9989437A768A4B581DE04EB',
      '0xBCA23985B853901B98F0C324D96D21AA5D27441B19570E24F9646E828B1F42B4',
      '0x57AE3AF22AB50A6723E0F56C4954E744215F1824515CF8CB0A620D9B10A0DA92',
      '0x8FA1FA34541EB9CA3781A96874D5F5F59E561F0A06265F8742B095B4032AC818',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
    ],
    witnesses: [
      '0x2F248BBBE40D5BC1EFCF85CAF7EA0C226006CD4CED5461277CC0060F44DAF773',
      '0x363A43F93DB7589F8DE925E322BC669A9AD0FB382E62DB71A19456690E0B55C4',
      '0xE2100C398C86665B6F8579EAA8B6CB371F18722C5BF71E1AD9954793A1495E29',
      '0x87224CB8D9C596CA77CDA32DED2446A9567BC98F5C951086EB20E81BF6DD07D0',
    ],
    flags: ['0x03', '0x01', '0x01', '0x01'],
    values: ['0x60601A16F49D0C6E8BD14415F466F8BD4B0981F58A15BDB06A1FA1E3DC49553F'],
    signatures: [{
      'by'  : '0x5D69FA3D4D9C29280CF6B048C4B7C2E63CFB7CD73FBCD7B9AB6C4CFD2191CFC5',
      'sigR': '0x9A43F0649AFE731FA570AD483AA69A03F5E0502BD5C0FD58831080537E4873FB',
      'sigS': '0x84830BBCD052BA65DB808CD92E6E98F914A6329590A0660419F822C10235FC0B',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000B00000004AA7AF2ABDAA2E37785B23AEC36F73A3280FF1326595D0F976532FF8246D8536C',
    }, {
      'by'  : '0x459F403625FFA7BB6C8A134C6A5948F827C0C183C2895F188931FED9A3534C42',
      'sigR': '0x10848A754AB513C63EC7D4D1EBB114776AD5F61504E3CF9F48993D9A5499EF4B',
      'sigS': '0xE6A9BBEDE14ABB13457E7BB43B05B37BE58AF40C4764F75778A70DEA9B6A1605',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000B00000004AA7AF2ABDAA2E37785B23AEC36F73A3280FF1326595D0F976532FF8246D8536C',
    }, {
      'by'  : '0xDEC989D1F7D08669F9078624458038BB0BD4857E812F0532EC1EC2655D90B99B',
      'sigR': '0xE1AAAA7A4E105A3B415282C4C305347337C09A43472C9D151A36E1E0D67A78AF',
      'sigS': '0xD20C96D79E595EC2E3E6AF64E13F98F1E1D7FAC5E9B994F3EAF09AFF5E66890C',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000B00000004AA7AF2ABDAA2E37785B23AEC36F73A3280FF1326595D0F976532FF8246D8536C',
    }, {
      'by'  : '0x48A450E7A340C810034F36C6CE78197CBEC20D123858813F7E27A881BDDFDCFA',
      'sigR': '0xED1FB3E9662181EFBDC1203ABBF781C663ED078D9F975A40D3E214A5ED1FAC68',
      'sigS': '0x805F0C5A77271133AAE179CE9AC121BDC6B42DD257DE57B346BE41BFF79E0F24',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000002',
      'meta': '0x0000000B000000030BAED5ED8B8BA1A10432EF5CB62525868E5569B8E9088993990F69C78047C0DE',
    }],
    handlers: [{
        'fingerprint': 'net.corda:rniw7B2Mqi7zlkPpKmJ77A==',
        'componentIndex': '0x01',
        'describedSize': '0x02',
        'describedType': 'String',
        'describedPath': '0x00',
        'solidityType': 'string',
        'parser': 'PathParser',
      }, {
        'fingerprint': 'net.corda:ngdwbt6kRT0l5nn16uf87A==',
        'componentIndex': '0x02',
        'describedSize': '0x06',
        'describedType': 'String',
        'describedPath': '0x00',
        'solidityType': 'string',
        'parser': 'PartyParser',
      }, {
        'fingerprint': 'net.corda:ngdwbt6kRT0l5nn16uf87A==',
        'componentIndex': '0x03',
        'describedSize': '0x06',
        'describedType': 'String',
        'describedPath': '0x00',
        'solidityType': 'string',
        'parser': 'PartyParser',
      }, {
        'fingerprint': '',
        'componentIndex': '0x00',
        'describedSize': '0x00',
        'describedType': '',
        'describedPath': '0x00',
        'solidityType': 'address',
        'parser': 'NoParser',
      }, {
        'fingerprint': '',
        'componentIndex': '0x00',
        'describedSize': '0x00',
        'describedType': '',
        'describedPath': '0x00',
        'solidityType': 'uint256',
        'parser': 'NoParser',
      }, {
        'fingerprint': 'net.corda:EX8RRuprLshI1m51O4333A==',
        'componentIndex': '0x00',
        'describedSize': '0x02',
        'describedType': 'String',
        'describedPath': '0x0101',
        'solidityType': 'uint256',
        'parser': 'PathParser',
      },
    ]
  }, {
    id: "Adhara DApp",
    prefix: '636F726461010000',
    component: '0080C562000000000001D000000E420000000300A3226E65742E636F7264613A51307A55474E2F4B367777777975496C4E66335261773D3DD0000003980000000500A3226E65742E636F7264613A372B30747468524E384B742B546255446266663837413D3DC0820100A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A05B3059301306072A8648CE3D020106082A8648CE3D03010703420004038D226DCD0FA574316DA478AA75225E6CE18F65CBD96E60BF3C8251B196541756E5DCF7CCAB21B712601ED0278501F2F33D0B5FDAA4C09E62639464E4910871A12F6E65742E636F7264612E73616D706C65732E6578616D706C652E636F6E7472616374732E444352436F6E747261637400A3226E65742E636F7264613A446C64573979533474424F7A653671763655345154413D3DD0000001D600000008A10347425000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC0920200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC0180640A1024742A1064C6F6E646F6EA106506172747941404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B65700321005918F8DB2515D38F0074543A3AC2BDB5B18A40DD733EBE42B7F75E388F66F48700A3226E65742E636F7264613A726E69773742324D7169377A6C6B50704B6D4A3737413D3DC013024098FCF70523051C49968C8E4033A15AD49000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC0940200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC01A0640A1025553A1084E657720596F726BA106506172747942404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B6570032100F415ECD394E50C1752AD515773880CD5F6FB78FA0481ACCDBFA600D05B7E549740A1094541524D41524B4544A1083437356133366239A107313030303030304000A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3DC0920200A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3DC0180640A1024742A1064C6F6E646F6EA1064E6F74617279404000A3216E65742E636F7264613A6A6176612E73656375726974792E5075626C69634B6579A02C302A300506032B6570032100A8CEA277AA9102D266D04BC3B5C7CB2B2C144EA42937E0128186FC65F256B64F0080C562000000000002D000000A6000000001D000000A570000000A0080C562000000000005D00000018400000005A1296E65742E636F7264612E636F72652E636F6E7472616374732E5472616E73616374696F6E537461746540450080C562000000000003C02602A3226E65742E636F7264613A51307A55474E2F4B367777777975496C4E66335261773D3D40D00000011C000000050080C562000000000004C04607A10A636F6E73747261696E74A1012AC03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E74404041420080C562000000000004C01807A108636F6E7472616374A106737472696E6745404041420080C562000000000004C03907A10464617461A1012AC02901A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E74726163745374617465404041420080C562000000000004C01807A10B656E63756D6272616E6365A103696E7445404042420080C562000000000004C02D07A1066E6F74617279A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404041420080C562000000000005C09605A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E7440C03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E740080C562000000000003C02602A3226E65742E636F7264613A4D6766362F7332416A6B5A6154382F6255396E4E53513D3D40450080C562000000000005C08805A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E7472616374537461746540C02901A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A5A326932426D6F35324566756346585A3842324350513D3D40450080C562000000000005C0D105A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747940450080C562000000000003C02602A3226E65742E636F7264613A48394B4F69386167557573674B4B69334D45423378673D3D40C07B020080C562000000000004C03307A1046E616D65A1256E65742E636F7264612E636F72652E6964656E746974792E436F726461583530304E616D6545404041420080C562000000000004C02F07A1096F776E696E674B6579A1012AC01A01A1176A6176612E73656375726974792E5075626C69634B6579404041420080C562000000000005D00000014400000005A1256E65742E636F7264612E636F72652E6964656E746974792E436F726461583530304E616D6540450080C562000000000003C02602A3226E65742E636F7264613A6E6764776274366B5254306C356E6E313675663837413D3D40C0E3060080C562000000000004C01A07A10A636F6D6D6F6E4E616D65A106737472696E6745404042420080C562000000000004C01707A107636F756E747279A106737472696E6745404041420080C562000000000004C01807A1086C6F63616C697479A106737472696E6745404041420080C562000000000004C01C07A10C6F7267616E69736174696F6EA106737472696E6745404041420080C562000000000004C02007A1106F7267616E69736174696F6E556E6974A106737472696E6745404042420080C562000000000004C01507A1057374617465A106737472696E6745404042420080C562000000000005C0D605A1366E65742E636F7264612E636F72652E636F6E7472616374732E5369676E61747572654174746163686D656E74436F6E73747261696E7440C03001A12D6E65742E636F7264612E636F72652E636F6E7472616374732E4174746163686D656E74436F6E73747261696E740080C562000000000003C02602A3226E65742E636F7264613A372B30747468524E384B742B546255446266663837413D3D40C036010080C562000000000004C02907A1036B6579A1012AC01A01A1176A6176612E73656375726974792E5075626C69634B6579404041420080C562000000000005D00000024600000005A1296E65742E636F7264612E73616D706C65732E6578616D706C652E7374617465732E444352537461746540C07603A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E6561725374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E74726163745374617465A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C6553746174650080C562000000000003C02602A3226E65742E636F7264613A446C64573979533474424F7A653671763655345154413D3D40D000000167000000080080C562000000000004C01807A10863757272656E6379A106737472696E6745404042420080C562000000000004C02D07A106697373756572A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404042420080C562000000000004C03B07A1086C696E6561724964A1296E65742E636F7264612E636F72652E636F6E7472616374732E556E697175654964656E74696669657245404041420080C562000000000004C02C07A1056F776E6572A11D6E65742E636F7264612E636F72652E6964656E746974792E506172747945404042420080C562000000000004C01507A10570726F6F66A106737472696E6745404042420080C562000000000004C01607A106737461747573A106737472696E6745404042420080C562000000000004C01707A10774726164654964A106737472696E6745404042420080C562000000000004C01507A10576616C7565A106737472696E6745404042420080C562000000000005C0AC05A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E656172537461746540C04F02A1246E65742E636F7264612E636F72652E636F6E7472616374732E4C696E6561725374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A416A4D5A704D6F6A5268685A36364A6B7433576243413D3D40450080C562000000000005C0AE05A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C65537461746540C05002A1256E65742E636F7264612E636F72652E736368656D61732E517565727961626C655374617465A1266E65742E636F7264612E636F72652E636F6E7472616374732E436F6E747261637453746174650080C562000000000003C02602A3226E65742E636F7264613A42383263534636543034544350666C67587332626B673D3D40450080C562000000000005C0A505A1296E65742E636F7264612E636F72652E636F6E7472616374732E556E697175654964656E74696669657240450080C562000000000003C02602A3226E65742E636F7264613A726E69773742324D7169377A6C6B50704B6D4A3737413D3D40C043020080C562000000000004C01A07A10A65787465726E616C4964A106737472696E6745404042420080C562000000000004C01007A1026964A1047575696445404041420080C562000000000009C10100',
    nonce: 'A39E35018B5E1B89EAC72BFF8B0BC86D8AEC117FD2692BD6439A5A8E4E6A075F',
    hash: '67DE8C49537263FBF81A69FA214DF3903EBA581B63A9D8071DD83270887FC61D',
    salt: '39F4600478DAF2773F914E7CCC5230E678C4DDDD2E7F51AD43659B1645B89CFF',
    groupIndex: '01',
    internalIndex: '00',
    root: 'A46E9FDC6E6DD4A659E10C1B42619CE078996AB009C8EA82BEDAEDF20C0B939A',
    tradeId: '475a36b9',
    receiver: 'Tz1QYXJ0eUEsIEw9TG9uZG9uLCBDPUdC',
    sender: 'Tz1QYXJ0eUIsIEw9TmV3IFlvcmssIEM9VVM=',
    controlContract: '0xc23cdfef6ec7b1b39c6cb898d7acc71437f167bd',
    sourceBlockchainId: '0x03',
    holdAmount: '0xF4240', //1000000;
    leaves: [
      '0x1A3357D5D28F6BD415D64CED45D9975D7992FCEB997DA33227E0242A36792257',
      '0x67DE8C49537263FBF81A69FA214DF3903EBA581B63A9D8071DD83270887FC61D',
      '0xC028E9D66372AFA2F4AA223C3954491B07070DEFEE194525E38176B943035E2A',
      '0xAA6643E66EB89ECCD219BFA53108D92507D0561392FE85B1842877A249B05594',
      '0x77D37C81B91A5B3884CA38EA175988C1E4918B0EFFD50D9A2025669783B9DB8C',
      '0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF',
      '0x5342E558FA2FE3E521249399A44869479D6766273EE8C7625005B4C6B720D9E7',
      '0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF',
      '0xBDDBBFA9B35ABCC9FD32CCC01170816FA47B45A2B199F2B4481CC8CC06773932',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
      '0x0000000000000000000000000000000000000000000000000000000000000000',
    ],
    witnesses: [
      '0x1A3357D5D28F6BD415D64CED45D9975D7992FCEB997DA33227E0242A36792257',
      '0x91BA378A1776FB1CDF669C9E36AA35F1CEFCAF6EF3F9F2D0013937EFC2A747E8',
      '0x868E2E6CB6197ECFF92825120DCDCB923BAA4BCD38DB9C69DFE65FE9673C8DA9',
      '0x1B58857B3475DD6B65F27F85D993C97AAB833B66E8C5270A190A50311CE11CCE',
    ],
    flags: ['0x03', '0x01', '0x01', '0x01'],
    values: ['0x67DE8C49537263FBF81A69FA214DF3903EBA581B63A9D8071DD83270887FC61D'],
    signatures: [{
      'by'  : '0x5918F8DB2515D38F0074543A3AC2BDB5B18A40DD733EBE42B7F75E388F66F487',
      'sigR': '0x63787BED632C6F7F963D5D813A582BE50D671EBB1289FCFFCCB1BA319DE212F1',
      'sigS': '0xD1C29ADBABB70F8F617981F9ED7999167695C040C2741C488B0706BE7D9FB90F',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000A00000004A46E9FDC6E6DD4A659E10C1B42619CE078996AB009C8EA82BEDAEDF20C0B939A',
    }, {
      'by'  : '0xF415ECD394E50C1752AD515773880CD5F6FB78FA0481ACCDBFA600D05B7E5497',
      'sigR': '0x14EAE51395AF6D278B5174D701689C3B7CF86030642392C9371CB60E3C907FC4',
      'sigS': '0xDE9FBDE6C01CBDED2F8FBF9E9399E8731F825E10B3D7341ED73C74E0FC96AB08',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000A00000004A46E9FDC6E6DD4A659E10C1B42619CE078996AB009C8EA82BEDAEDF20C0B939A',
    }, {
      'by'  : '0xA8CEA277AA9102D266D04BC3B5C7CB2B2C144EA42937E0128186FC65F256B64F',
      'sigR': '0x4FA8BAAF04CA29502BB4D51A267E64B9657C01E88A14969DC9D30C4C43003B57',
      'sigS': '0x6DE689B91B87ADD6D354013CC7CF454435078B4EF22F4940881090FCD6E2420A',
      'sigV': '0x0000000000000000000000000000000000000000000000000000000000000000',
      'meta': '0x0000000A00000004CEF6CD791B094A69160E3CCACCDA07527EB594F1FE92B9044A3BCC96BA45B440',
    }],
    handlers: [{
      'fingerprint': 'net.corda:DldW9yS4tBOze6qv6U4QTA==',
      'componentIndex': '0x00',
      'describedSize': '0x08',
      'describedType': 'String',
      'describedPath': '0x06',
      'solidityType': 'string',
      'parser': 'PathParser',
    }, {
      'fingerprint': 'net.corda:ngdwbt6kRT0l5nn16uf87A==',
      'componentIndex': '0x01',
      'describedSize': '0x06',
      'describedType': 'String',
      'describedPath': '0x00',
      'solidityType': 'string',
      'parser': 'PartyParser',
    }, {
      'fingerprint': 'net.corda:ngdwbt6kRT0l5nn16uf87A==',
      'componentIndex': '0x00',
      'describedSize': '0x06',
      'describedType': 'String',
      'describedPath': '0x00',
      'solidityType': 'string',
      'parser': 'PartyParser',
    }, {
      'fingerprint': '',
      'componentIndex': '0x00',
      'describedSize': '0x00',
      'describedType': '',
      'describedPath': '0x00',
      'solidityType': 'address',
      'parser': 'NoParser',
    }, {
      'fingerprint': '',
      'componentIndex': '0x00',
      'describedSize': '0x00',
      'describedType': '',
      'describedPath': '0x00',
      'solidityType': 'uint256',
      'parser': 'NoParser',
    }, {
      'fingerprint': 'net.corda:DldW9yS4tBOze6qv6U4QTA==',
      'componentIndex': '0x00',
      'describedSize': '0x08',
      'describedType': 'String',
      'describedPath': '0x07',
      'solidityType': 'uint256',
      'parser': 'PathParser',
    },
    ]
  }]
  let resultData = [
    ['2022-11-02_1', 'Tz1IUUxBeC10ZXN0IEJhbmsgQTEsIEw9WnVnLCBDPUNI', 'Tz1IUUxBeC10ZXN0IEJhbmsgQjIsIEw9WnVnLCBDPUNI', '12345'],
    ['475a36b9', 'Tz1QYXJ0eUIsIEw9TmV3IFlvcmssIEM9VVM=', 'Tz1QYXJ0eUEsIEw9TG9uZG9uLCBDPUdC', '1000000']
  ];

  beforeEach(async () => {
    instance = await CordaVerify.new()
  })

  it('should be able to calculate the component hash', async () => {
    for (let i=0; i<2; i++) {
      let td = testData[i];
      const n = await instance.calculateNonce(`0x${td.groupIndex}`, `0x${td.internalIndex}`, `0x${td.salt}`);
      assert.equal(n, '0x' + td.nonce.toLowerCase());
      const h = await instance.calculateComponentHash(`0x${td.groupIndex}`, `0x${td.internalIndex}`, `0x${td.salt}`, `0x${td.prefix}${td.component}`);
      assert.equal(h, '0x' + td.hash.toLowerCase());
      const result = await instance.computeComponentHash(`0x${td.groupIndex}`, `0x${td.internalIndex}`, `0x${td.salt}`, `0x${td.prefix}${td.component}`);
      assert.equal(result.receipt.status, true)
      //console.log('Gas used to compute hash: ' + result.receipt.gasUsed)
      for (let decodedLog of result.receipt.logs) {
        let key = decodedLog.args['1'].toString();
        let value = decodedLog.args['0'].toString();
        if (key === 'Hash')
          assert.equal(value, '0x' + td.hash.toLowerCase());
      }
    }
  });

  it('should be able to retrieve the proton graph from the buffer', async () => {
    for (let i=0; i<2; i++) {
      let td = testData[i];
      let rd = resultData[i];
      const handlerData = web3.eth.abi.encodeParameters(
        [
          {
            'ParameterHandler[]': {
              'fingerprint': 'string',
              'componentIndex': 'uint8',
              'describedSize': 'uint8',
              'describedType': 'string',
              'describedPath': 'bytes',
              'solidityType': 'string',
              'parser': 'string',
            },
          },
        ],
        [
          td.handlers,
        ]
      )
      try {
        const result = await instance.extractByFingerprint(`0x${td.component}`, handlerData);
        assert.equal(result.receipt.status, true)
        //console.log('Gas used to extract data: ' + result.receipt.gasUsed)
        let l = 0;
        for (let decodedLog of result.receipt.logs) {
          let key = decodedLog.args['1'].toString();
          let value = decodedLog.args['0'].toString();
          if (key === 'Result')
            assert.equal(value, rd[l++]);
        }
      } catch (err) {
        console.log({err})
        assert.fail('No revert expected:', err)
      }
    }
  });

  it('should be able to extract values from encoded parameters', async () => {
    for (let i=0; i<2; i++) {
      let td = testData[i];
      let rd = resultData[i];
      const functionSignature = web3.eth.abi.encodeFunctionSignature('requestFollowLeg(string,string,string,address,uint256,uint256)');
      const functionParameters = web3.eth.abi.encodeParameters(
        ['string', 'string', 'string', 'address', 'uint256', 'uint256'],
        [td.tradeId, td.sender, td.receiver, td.controlContract, td.sourceBlockchainId, td.holdAmount]
      )
      const handlerData = web3.eth.abi.encodeParameters(
        [
          {
            'ParameterHandler[]': {
              'fingerprint': 'string',
              'componentIndex': 'uint8',
              'describedSize': 'uint8',
              'describedType': 'string',
              'describedPath': 'bytes',
              'solidityType': 'string',
              'parser': 'string',
            },
          },
        ],
        [
          td.handlers,
        ]
      )
      try {
        const callParameters = functionSignature + functionParameters.substring(2);
        const result = await instance.extractParameters(callParameters, handlerData);
        assert.equal(result.receipt.status, true)
        //console.log('Gas used to extract values: ' + result.receipt.gasUsed)
        let l = 0;
        for (let decodedLog of result.receipt.logs) {
          let key = decodedLog.args['1'].toString();
          let value = decodedLog.args['0'].toString();
          if (key === 'Parameter')
            assert.equal(value, rd[l++]);
        }
      } catch (err){
        console.log({err})
        assert.fail('No revert expected:', err)
      }
    }
  })

  it('should be able to validate event data', async () => {
    for (let i=0; i<2; i++) {
      let td = testData[i];
      const functionSignature = web3.eth.abi.encodeFunctionSignature('requestFollowLeg(string,string,string,address,uint256,uint256)');
      const functionParameters = web3.eth.abi.encodeParameters(
        ['string', 'string', 'string', 'address', 'uint256', 'uint256'],
        [td.tradeId, td.sender, td.receiver, td.controlContract, td.sourceBlockchainId, td.holdAmount]
      )
      const callParameters = functionSignature + functionParameters.substring(2);
      const eventData = web3.eth.abi.encodeParameters(
        [
          {
            'EventData': {
              'callParameters': 'bytes',      // Parameters of the function we want to call through the interop service.
              'hashAlgorithm': 'string',      // Hash algorithm used in the Merkle tree. Only SHA-256 is currently supported.
              'privacySalt': 'bytes32',       // Salt needed to compute a Merkle tree leaf.
              'ComponentGroup': {
                'groupIndex': 'uint8',
                'internalIndex': 'uint8',
                'encodedBytes': 'bytes',      // Hash of this component becomes the value we want to proof Merkle tree membership of.
              },
            },
          },
        ],
        [
          {
            'callParameters': callParameters,
            'hashAlgorithm': 'SHA-256',
            'privacySalt': '0x' + td.salt,
            'ComponentGroup': {
              'groupIndex': '0x' + td.groupIndex,
              'internalIndex': '0x' + td.internalIndex,
              'encodedBytes': '0x' + td.component,
            },
          }
        ]
      )
      const proofData = web3.eth.abi.encodeParameters(
        [
          {
            'ProofData': {
              'root': 'bytes32',
              'witnesses': 'bytes32[]',
              'flags': 'uint8[]',
              'values': 'bytes32[]',
            },
          },
        ],
        [
          {
            'root': '0x' + td.root,
            'witnesses': td.witnesses,
            'flags': td.flags,
            'values': td.values
          }
        ]
      )
      const signatureData = web3.eth.abi.encodeParameters(
        [
          {
            'Signature[]': {                  // Contains the Corda proof consisting of signatures over the transaction tree root or a derivative thereof.
              'by': 'uint256',
              'sigR': 'uint256',
              'sigS': 'uint256',
              'sigV': 'uint256',
              'meta': 'bytes',
            }
          },
        ],
        [
          td.signatures
        ]
      )
      const handlerData = web3.eth.abi.encodeParameters(
        [
          {
            'ParameterHandler[]': {
              'fingerprint': 'string',
              'componentIndex': 'uint8',
              'describedSize': 'uint8',
              'describedType': 'string',
              'describedPath': 'bytes',
              'solidityType': 'string',
              'parser': 'string',
            },
          },
        ],
        [
          td.handlers,
        ]
      )
      try {
        const result = await instance.validateEvent(eventData, handlerData, proofData, signatureData);
        assert.equal(result.receipt.status, true)
        //console.log('Gas used to validate data: ' + result.receipt.gasUsed)
      } catch (err){
        //console.log({err})
        assert.fail('No revert expected:', err)
      }
    }
  })

})


